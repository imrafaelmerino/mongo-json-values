language: java
install: mvn install
before_install:
- openssl aes-256-cbc -K $encrypted_b9997e150274_key -iv $encrypted_b9997e150274_iv -in key.asc.enc -out key.asc -d
- echo $PGP_PASSPHRASE | gpg --passphrase-fd 0 --batch --yes --import key.asc
after_success:
- bash <(curl -s https://codecov.io/bash)
deploy:
- provider: script
  script: mvn deploy --settings .travis/settings.xml -DskipTests=true -B -U -Prelease
  skip_cleanup: true
  on:
    repo: imrafaelmerino/mongo-values
    tags: true
- provider: releases
  skip_cleanup: true
  api_key: "$GITHUB_TOKEN"
  draft: false
  prerelease: false
  body: 'Generated by TravisCI during the release process: build URL: $TRAVIS_BUILD_WEB_URL,
    build number: $TRAVIS_BUILD_NUMBER, commit: $TRAVIS_COMMIT, tag: $TRAVIS_TAG'
  name: Astro
  file:
  - target/JAVADOC.zip
  - docs/CHANGELOG.md
  - docs/README.md
  - target/SOURCES.zip
  on:
    repo: imrafaelmerino/mongo-values
    tags: true
addons:
  sonarcloud:
    organization: imrafaelmerino
    token:
      secure: ejCLEnNO7Xr/TRbWr7ShAR+s+j66t1YiGmXrODh/4fhjsv5tBdyG/+n8VVYPF6JPYMnFJzWQ8f01UuNjR5lU9eB+1PQrEOOGfp0uglLvfRCxFHhleBXclXmXu79j5OgG09/mWOltWiSe72AlX6aKr+zDzzXaRoK5nR/kWYr6i6mCafzkLs25z0i0U/+WyKjkiC/6tS77+g13C7wkdA3Bl7B0K9F0Lxec/tIfxwn8BYuWQEhdFFABU8kZqiI0tSN4EbOSMN4tAMfxz7HtLUhPJeN2KEFcJVIKpnDlGdhD4OdgNDeQUc90m9e6hLjJ/X9uNbgwp+n7WRSyMnoBSLaw4XYRzejGHlhQ89YUrjtw+Aj7cFEOIFK4TTRxfmeRhN5Ge5V05Lc3ZCrPipaL0miCEDQoxKMIL1+C+KxAVGAFuu5WQ6N0in7ZUoBus3MebU7cg4hK0MKFfP4q4YvOfR0/eBWXTtJ/0e/i1fY9wVTZW0fy6siBpn4J6VuxJL1ACA/hjYvHkqFVdC8vhFCZ1otl2sDpyHzzaMMoIdAVh7LxDIrt82UTQHz8RDXb1aEySp8T15szetcPHUqqAxCT/XPN07KJEN5Jv382xxQ6Hc9YKqKFKmkgz75Z9CNBXhGQR3/3kiWQtqkyYEDydyNmbX5NLzPI3J7t3+vph/TmQSWJkNg=
script:
- mvn clean verify sonar:sonar -Pcoverage -Dsonar.projectKey=imrafaelmerino_mongo-values
